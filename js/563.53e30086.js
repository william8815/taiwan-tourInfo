"use strict";(self["webpackChunktaiwan_tour"]=self["webpackChunktaiwan_tour"]||[]).push([[563],{5062:function(e,t,a){var i=a(6163);t["Z"]={getHotel({area:e,select:t,filter:a,top:s,skip:o}){return i.l.get(`/Hotel/${e}?${t}${a}${s}${o}%24format=JSON`)},getAllHotel({filter:e,top:t,skip:a}){return i.l.get(`/Hotel?${e}${t}${a}%24format=JSON`)}}},4563:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(6252),s=a(9963);const o={class:"container"},n={key:0},l={key:0},r={key:1},c={key:0,class:"btn-section"},d=["disabled"],u={key:0,class:"spinner-border spinner-border-sm text-light",role:"status"},p=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),m=[p],v={key:1};function $(e,t,a,p,$,g){const H=(0,i.up)("MainHead"),h=(0,i.up)("SlideSpot"),w=(0,i.up)("SpotList");return(0,i.wg)(),(0,i.iD)("div",o,[(0,i.Wm)(H),(0,i.Wm)(s.uT,{name:"slide"},{default:(0,i.w5)((()=>[p.isSlideLoading?((0,i.wg)(),(0,i.iD)("div",n)):((0,i.wg)(),(0,i.j4)(h,{key:1,spots:p.hotelSlide},null,8,["spots"]))])),_:1}),(0,i.Wm)(s.uT,{name:"cardList"},{default:(0,i.w5)((()=>[p.isLoading?((0,i.wg)(),(0,i.iD)("div",l)):((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(w,{cardList:p.hotelList},null,8,["cardList"]),0!==p.hotelList.length?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>p.showMore&&p.showMore(...e)),class:"moreBtn btn btn-primary",disabled:p.isLoading},[p.isProcessing?((0,i.wg)(),(0,i.iD)("div",u,m)):((0,i.wg)(),(0,i.iD)("span",v,"更多旅館"))],8,d)])):(0,i.kq)("",!0)]))])),_:1})])}var g=a(9673),H=a(6710),h=a(2339),w=a(5062),k=a(3907),y=a(2262),f=a(2201),C={components:{MainHead:g.Z,SlideSpot:H.Z,SpotList:h.Z},setup(){const e=(0,y.iH)(0),t=(0,y.iH)(12),a=(0,y.iH)(""),s=(0,y.iH)(""),o=(0,y.iH)(""),n=(0,y.iH)([]),l=(0,y.qj)([]),r=(0,y.iH)(!1),c=(0,y.iH)(!1),d=(0,y.iH)(!1),u=(0,k.oR)(),p=(0,i.Fl)((()=>u.state.currentArea)),m=(0,f.yj)(),v=(0,y.iH)(m.params.area),$=async()=>{c.value=!0;let e=25,t=Math.floor(9*Math.random())+1,a=e/5,i=[];const{data:s}=await w.Z.getHotel({area:p.value.enName,select:"",filter:"",top:`${encodeURIComponent("$")}top=${e}&`,skip:`${encodeURIComponent("$")}skip=${t}&`});for(let o=0;o<5;o++)i.push({id:s[a-1].HotelID,address:s[a-1].Address?s[a-1].Address:s[a-1].City,city:s[a-1].City,picture:s[a-1].Picture?s[a-1].Picture:{},name:s[a-1].HotelName}),a+=e/5;n.value=i,c.value=!1},g=async()=>{r.value=!0;let i=[];const{data:n}=await w.Z.getHotel({area:p.value.enName,select:a.value?`${encodeURIComponent("$")}select=${a.value}&`:"",filter:s.value?`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(${s.value}, '${o.value}')`)}&`:"",top:`${encodeURIComponent("$")}top=${t.value}&`,skip:`${encodeURIComponent("$")}skip=${e.value}&`});i=n.map((e=>({id:e.HotelID,address:e.Address?e.Address:e.City,city:e.City,class1:e.Class?e.Class:"",class2:"",class3:"",description:e.Description,openTime:e.OpenTime,phone:e.Phone,picture:e.Picture?e.Picture:{},position:e.Position,name:e.HotelName}))),l.push(...i),r.value=!1};(0,i.wF)($),(0,i.wF)(g);const H=()=>{d.value=!0,e.value+=12,setTimeout((()=>{g(),d.value=!1}),1e3)};return(0,f.ao)((a=>{const{area:i}=a.params;t.value=12,e.value=0,l.splice(0,l.length),v.value!==i&&(v.value=i,$(),g())})),{skip:e,top:t,selectName:a,category:s,categoryName:o,hotelSlide:n,hotelList:l,isLoading:r,isSlideLoading:c,isProcessing:d,currentArea:p,showMore:H}}},L=a(3744);const S=(0,L.Z)(C,[["render",$]]);var b=S}}]);
//# sourceMappingURL=563.53e30086.js.map