"use strict";(self["webpackChunktaiwan_tour"]=self["webpackChunktaiwan_tour"]||[]).push([[44],{3414:function(e,t,a){var s=a(6163);t["Z"]={getRestaurant({area:e,select:t,filter:a,top:i,skip:n}){return s.l.get(`/Restaurant/${e}?${t}${a}${i}${n}%24format=JSON`)},getAllRestaurant({filter:e,top:t,skip:a}){return s.l.get(`/Restaurant?${e}${t}${a}%24format=JSON`)}}},1236:function(e,t,a){a.r(t),a.d(t,{default:function(){return S}});var s=a(6252),i=a(9963);const n={class:"container"},o={key:0},r={key:0},l={key:1},u={key:0,class:"btn-section"},d=["disabled"],c={key:0,class:"spinner-border spinner-border-sm text-light",role:"status"},p=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),m=[p],v={key:1};function g(e,t,a,p,g,$){const f=(0,s.up)("MainHeader"),w=(0,s.up)("SlideSpot"),y=(0,s.up)("SpotList");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(f),(0,s.Wm)(i.uT,{name:"slide"},{default:(0,s.w5)((()=>[p.isSlideLoading?((0,s.wg)(),(0,s.iD)("div",o)):((0,s.wg)(),(0,s.j4)(w,{key:1,spots:p.foodSlide},null,8,["spots"]))])),_:1}),(0,s.Wm)(i.uT,{name:"cardList"},{default:(0,s.w5)((()=>[p.isLoading?((0,s.wg)(),(0,s.iD)("div",r)):((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(y,{cardList:p.foodList},null,8,["cardList"]),0!==p.foodList.length?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("button",{onClick:t[0]||(t[0]=(...e)=>p.showMore&&p.showMore(...e)),class:"moreBtn btn btn-primary",disabled:p.isLoading},[p.isProcessing?((0,s.wg)(),(0,s.iD)("div",c,m)):((0,s.wg)(),(0,s.iD)("span",v,"更多美食"))],8,d)])):(0,s.kq)("",!0)]))])),_:1})])}var $=a(9673),f=a(6710),w=a(2339),y=a(3414),k=a(3907),h=a(2262),R=a(2201),C={components:{MainHeader:$.Z,SlideSpot:f.Z,SpotList:w.Z},setup(){const e=(0,h.iH)(0),t=(0,h.iH)(12),a=(0,h.iH)(""),i=(0,h.iH)(""),n=(0,h.iH)(""),o=(0,h.iH)([]),r=(0,h.qj)([]),l=(0,h.iH)(!1),u=(0,h.iH)(!1),d=(0,h.iH)(!1),c=(0,k.oR)(),p=(0,s.Fl)((()=>c.state.currentArea)),m=(0,R.yj)(),v=(0,h.iH)(m.params.area),g=async()=>{u.value=!0;let e=20,t=Math.floor(9*Math.random())+1,a=e/5,s=[];try{const{data:i}=await y.Z.getRestaurant({area:p.value.enName,select:"",filter:"",top:`${encodeURIComponent("$")}top=${e}&`,skip:`${encodeURIComponent("$")}skip=${t}&`});if(0!==i.length){for(let t=0;t<5;t++)s.push({id:i[a-1].RestaurantID,address:i[a-1].Address?i[a-1].Address:i[a-1].City,city:i[a-1].City,picture:i[a-1].Picture?i[a-1].Picture:{},name:i[a-1].RestaurantName}),a+=e/5;o.value=s}else o.value=[]}catch(i){console.log(i),o.value=[]}u.value=!1},$=async()=>{l.value=!0;let s=[];const{data:o}=await y.Z.getRestaurant({area:p.value.enName,select:a.value?`${encodeURIComponent("$")}select=${a.value}&`:"",filter:i.value?`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(${i.value}, '${n.value}')`)}&`:"",top:`${encodeURIComponent("$")}top=${t.value}&`,skip:`${encodeURIComponent("$")}skip=${e.value}&`});s=o.map((e=>({id:e.RestaurantID,address:e.Address?e.Address:e.City,city:e.City,class1:e.Class?e.Class:"",class2:"",class3:"",description:e.DescriptionDetail,openTime:e.OpenTime,phone:e.Phone,picture:e.Picture?e.Picture:{},position:e.Position,name:e.RestaurantName}))),r.push(...s),l.value=!1};(0,s.wF)(g),(0,s.wF)($);const f=()=>{d.value=!0,e.value+=12,setTimeout((()=>{$(),d.value=!1}),1e3)};return(0,R.ao)((a=>{const{area:s}=a.params;t.value=12,e.value=0,r.splice(0,r.length),v.value!==s&&(v.value=s,g(),$())})),{skip:e,top:t,selectName:a,category:i,categoryName:n,foodSlide:o,foodList:r,isLoading:l,isSlideLoading:u,isProcessing:d,currentArea:p,showMore:f}}},L=a(3744);const H=(0,L.Z)(C,[["render",g]]);var S=H}}]);
//# sourceMappingURL=44.483d803b.js.map