"use strict";(self["webpackChunktaiwan_tour"]=self["webpackChunktaiwan_tour"]||[]).push([[102],{3414:function(e,t,n){var o=n(6163);t["Z"]={getRestaurant({area:e,select:t,filter:n,top:i,skip:a}){return o.l.get(`/Restaurant/${e}?${t}${n}${i}${a}%24format=JSON`)},getAllRestaurant({filter:e,top:t,skip:n}){return o.l.get(`/Restaurant?${e}${t}${n}%24format=JSON`)}}},5102:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o=n(6252),i=n(9963);const a={class:"container"},s={key:0},r={key:0},l={key:1},u=(0,o._)("h2",null,"更多美食 :",-1);function c(e,t,n,c,p,d){const m=(0,o.up)("InfoSection"),f=(0,o.up)("MoreSection");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(i.uT,{name:"info"},{default:(0,o.w5)((()=>[c.isLoading?((0,o.wg)(),(0,o.iD)("div",s)):((0,o.wg)(),(0,o.j4)(m,{key:1,initial_info:c.food},null,8,["initial_info"]))])),_:1}),(0,o.Wm)(i.uT,{name:"more-info"},{default:(0,o.w5)((()=>[c.isMoreLoading?((0,o.wg)(),(0,o.iD)("div",r)):((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(f,{more_spot:c.moreFood},{moretitle:(0,o.w5)((()=>[u])),_:1},8,["more_spot"])]))])),_:1})])}var p=n(9829),d=n(6394),m=n(3414),f=n(2262),$=n(2201),v={components:{InfoSection:p.Z,MoreSection:d.Z},setup(){const e=(0,f.iH)(1),t=(0,f.iH)(0),n=(0,f.iH)({}),i=(0,f.iH)([]),a=(0,f.iH)(!1),s=(0,f.iH)(!1),r=(0,$.yj)(),l=(0,f.iH)(r.params.id),u=async()=>{a.value=!0;const{data:o,statusText:i}=await m.Z.getAllRestaurant({filter:`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(RestaurantID, '${l.value}')`)}&`,top:`${encodeURIComponent("$")}top=${e.value}&`,skip:`${encodeURIComponent("$")}skip=${t.value}&`});"OK"===i&&console.log("串接成功!!!"),n.value={id:o[0].RestaurantID,address:o[0].Address?o[0].Address:"",class1:o[0].Class?o[0].Class:"",class2:"",class3:"",description:o[0].Description,openTime:o[0].OpenTime,phone:o[0].Phone,picture:o[0].Picture?o[0].Picture:{},position:o[0].Position,name:o[0].RestaurantName,website:o[0].WebsiteUrl?o[0].WebsiteUrl:""},a.value=!1},c=async()=>{s.value=!0;const{data:e,statusText:n}=await m.Z.getAllRestaurant({filter:"",top:`${encodeURIComponent("$")}top=10&`,skip:`${encodeURIComponent("$")}skip=${t.value}&`});"OK"===n&&console.log("串接成功!!!"),i.value=e.map((e=>({id:e.RestaurantID,address:e.Address?e.Address:"",class1:e.Class?e.Class:"",class2:"",class3:"",description:e.Description,openTime:e.OpenTime,phone:e.Phone,picture:e.Picture?e.Picture:{},position:e.Position,name:e.RestaurantName}))),i.value=i.value.filter((e=>e.id!==l.value)),s.value=!1};return(0,o.wF)(u),(0,o.wF)(c),{top:e,skip:t,food:n,isLoading:a,moreFood:i,isMoreLoading:s}}},g=n(3744);const w=(0,g.Z)(v,[["render",c]]);var R=w}}]);
//# sourceMappingURL=102.7888a614.js.map