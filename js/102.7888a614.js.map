{"version":3,"file":"js/102.7888a614.js","mappings":"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","sources":["webpack://taiwan-tour/./src/apis/tastyFood.js","webpack://taiwan-tour/./src/views/IndividualFood.vue","webpack://taiwan-tour/./src/views/IndividualFood.vue?2a40"],"sourcesContent":["import { apiHelper } from \"@/utils/helpers\";\r\nexport default{\r\n  getRestaurant({area,select,filter,top,skip}){\r\n    return apiHelper.get(`/Restaurant/${area}?${select}${filter}${top}${skip}%24format=JSON`)\r\n  },\r\n  getAllRestaurant({filter,top,skip}){\r\n    return apiHelper.get(`/Restaurant?${filter}${top}${skip}%24format=JSON`)\r\n  },\r\n}","<template>\r\n  <div class=\"container\">\r\n    <Transition name=\"info\">\r\n      <div v-if=\"isLoading\"></div>\r\n      <InfoSection v-else :initial_info=\"food\" />\r\n    </Transition>\r\n    <Transition name=\"more-info\">\r\n      <div v-if=\"isMoreLoading\"></div>\r\n      <div v-else>\r\n        <MoreSection :more_spot=\"moreFood\">\r\n          <template v-slot:moretitle>\r\n            <h2>更多美食 :</h2>\r\n          </template>\r\n        </MoreSection>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport InfoSection from \"../components/InfoSection.vue\";\r\nimport MoreSection from \"./../components/MoreSection.vue\";\r\nimport foodAPI from \"../apis/tastyFood\";\r\nimport { ref, onBeforeMount } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nexport default {\r\n  components: {\r\n    InfoSection,\r\n    MoreSection,\r\n  },\r\n  setup() {\r\n    const top = ref(1);\r\n    const skip = ref(0);\r\n    const food = ref({});\r\n    const moreFood = ref([]);\r\n    const isLoading = ref(false);\r\n    const isMoreLoading = ref(false);\r\n    const route = useRoute();\r\n    const routeId = ref(route.params.id);\r\n    const fetchOneFood = async () => {\r\n      isLoading.value = true;\r\n      const { data, statusText } = await foodAPI.getAllRestaurant({\r\n        filter: `${encodeURIComponent(\"$\")}filter=${encodeURIComponent(\r\n          `contains(RestaurantID, '${routeId.value}')`\r\n        )}&`,\r\n        top: `${encodeURIComponent(\"$\")}top=${top.value}&`,\r\n        skip: `${encodeURIComponent(\"$\")}skip=${skip.value}&`,\r\n      });\r\n      if (statusText === \"OK\") {\r\n        console.log(\"串接成功!!!\");\r\n      }\r\n      food.value = {\r\n        id: data[0].RestaurantID,\r\n        address: data[0].Address ? data[0].Address : \"\",\r\n        class1: data[0].Class ? data[0].Class : \"\",\r\n        class2: \"\",\r\n        class3: \"\",\r\n        description: data[0].Description,\r\n        openTime: data[0].OpenTime,\r\n        phone: data[0].Phone,\r\n        picture: data[0].Picture ? data[0].Picture : {},\r\n        position: data[0].Position,\r\n        name: data[0].RestaurantName,\r\n        website: data[0].WebsiteUrl ? data[0].WebsiteUrl : \"\",\r\n      };\r\n      isLoading.value = false;\r\n    };\r\n    const fetchMoreFood = async () => {\r\n      isMoreLoading.value = true;\r\n      const { data, statusText } = await foodAPI.getAllRestaurant({\r\n        filter: \"\",\r\n        top: `${encodeURIComponent(\"$\")}top=${10}&`,\r\n        skip: `${encodeURIComponent(\"$\")}skip=${skip.value}&`,\r\n      });\r\n      if (statusText === \"OK\") {\r\n        console.log(\"串接成功!!!\");\r\n      }\r\n      moreFood.value = data.map((spot) => {\r\n        return {\r\n          id: spot.RestaurantID,\r\n          address: spot.Address ? spot.Address : \"\",\r\n          class1: spot.Class ? spot.Class : \"\",\r\n          class2: \"\",\r\n          class3: \"\",\r\n          description: spot.Description,\r\n          openTime: spot.OpenTime,\r\n          phone: spot.Phone,\r\n          picture: spot.Picture ? spot.Picture : {},\r\n          position: spot.Position,\r\n          name: spot.RestaurantName,\r\n        };\r\n      });\r\n      moreFood.value = moreFood.value.filter(\r\n        (spot) => spot.id !== routeId.value\r\n      );\r\n      isMoreLoading.value = false;\r\n    };\r\n    onBeforeMount(fetchOneFood);\r\n    onBeforeMount(fetchMoreFood);\r\n    return {\r\n      top,\r\n      skip,\r\n      food,\r\n      isLoading,\r\n      moreFood,\r\n      isMoreLoading,\r\n    };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./IndividualFood.vue?vue&type=template&id=a132fff4\"\nimport script from \"./IndividualFood.vue?vue&type=script&lang=js\"\nexport * from \"./IndividualFood.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\ac-project\\\\taiwan-tour\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["getRestaurant","area","select","filter","top","skip","apiHelper","getAllRestaurant","class","_createElementVNode","_createElementBlock","_createVNode","_Transition","name","$setup","_hoisted_2","_createBlock","_component_InfoSection","initial_info","_hoisted_3","_hoisted_4","_component_MoreSection","more_spot","moretitle","_hoisted_5","components","InfoSection","MoreSection","setup","ref","food","moreFood","isLoading","isMoreLoading","route","useRoute","routeId","params","id","fetchOneFood","async","value","data","statusText","foodAPI","encodeURIComponent","console","log","RestaurantID","address","Address","class1","Class","class2","class3","description","Description","openTime","OpenTime","phone","Phone","picture","Picture","position","Position","RestaurantName","website","WebsiteUrl","fetchMoreFood","map","spot","onBeforeMount","__exports__","render"],"sourceRoot":""}