"use strict";(self["webpackChunktaiwan_tour"]=self["webpackChunktaiwan_tour"]||[]).push([[144],{9144:function(e,o,i){i.r(o),i.d(o,{default:function(){return $}});var s=i(6252),n=i(9963);const t={class:"container"},a={key:0},l={key:0},c={key:1},p=(0,s._)("h2",null,"更多景點 :",-1);function r(e,o,i,r,u,d){const m=(0,s.up)("InfoSection"),C=(0,s.up)("MoreSection");return(0,s.wg)(),(0,s.iD)("div",t,[(0,s.Wm)(n.uT,{name:"info"},{default:(0,s.w5)((()=>[r.isLoading?((0,s.wg)(),(0,s.iD)("div",a)):((0,s.wg)(),(0,s.j4)(m,{key:1,initial_info:r.spot},null,8,["initial_info"]))])),_:1}),(0,s.Wm)(n.uT,{name:"more-info"},{default:(0,s.w5)((()=>[r.isMoreLoading?((0,s.wg)(),(0,s.iD)("div",l)):((0,s.wg)(),(0,s.iD)("div",c,[(0,s.Wm)(C,{more_spot:r.moreSpot},{moretitle:(0,s.w5)((()=>[p])),_:1},8,["more_spot"])]))])),_:1})])}var u=i(9829),d=i(6394),m=i(7206),C=i(2262),v=i(2201),f={components:{InfoSection:u.Z,MoreSection:d.Z},setup(){const e=(0,C.iH)(1),o=(0,C.iH)(0),i=(0,C.iH)({}),n=(0,C.iH)([]),t=(0,C.iH)(!1),a=(0,C.iH)(!1),l=(0,v.yj)(),c=(0,C.iH)(l.params.id),p=async()=>{t.value=!0;const{data:s,statusText:n}=await m.Z.getAllSpot({filter:`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(ScenicSpotID, '${c.value}')`)}&`,top:`${encodeURIComponent("$")}top=${e.value}&`,skip:`${encodeURIComponent("$")}skip=${o.value}&`});"OK"===n&&console.log("串接成功!!!"),i.value={id:s[0].ScenicSpotID,address:s[0].Address?s[0].Address:s[0].City,class1:s[0].Class1?s[0].Class1:"",class2:s[0].Class2?s[0].Class2:"",class3:s[0].Class3?s[0].Class3:"",description:s[0].DescriptionDetail,openTime:s[0].OpenTime,phone:s[0].Phone,picture:s[0].Picture?s[0].Picture:{},position:s[0].Position,name:s[0].ScenicSpotName},t.value=!1},r=async()=>{a.value=!0;const{data:e,statusText:i}=await m.Z.getAllSpot({filter:"",top:`${encodeURIComponent("$")}top=10&`,skip:`${encodeURIComponent("$")}skip=${o.value}&`});"OK"===i&&console.log("串接成功!!!"),n.value=e.map((e=>({id:e.ScenicSpotID,address:e.Address?e.Address:e.City,class1:e.Class1?e.Class1:"",class2:e.Class2?e.Class2:"",class3:e.Class3?e.Class3:"",description:e.DescriptionDetail,openTime:e.OpenTime,phone:e.Phone,picture:e.Picture?e.Picture:{},position:e.Position,name:e.ScenicSpotName}))),n.value=n.value.filter((e=>e.id!==c.value)),a.value=!1};return(0,s.wF)(p),(0,s.wF)(r),{top:e,skip:o,spot:i,isLoading:t,moreSpot:n,isMoreLoading:a}}},S=i(3744);const w=(0,S.Z)(f,[["render",r]]);var $=w}}]);
//# sourceMappingURL=144.85c2fc97.js.map