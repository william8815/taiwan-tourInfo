{"version":3,"file":"js/144.85c2fc97.js","mappings":"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","sources":["webpack://taiwan-tour/./src/views/IndividualSpot.vue","webpack://taiwan-tour/./src/views/IndividualSpot.vue?b4d7"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <Transition name=\"info\">\r\n      <div v-if=\"isLoading\"></div>\r\n      <InfoSection v-else :initial_info=\"spot\" />\r\n    </Transition>\r\n    <Transition name=\"more-info\">\r\n      <div v-if=\"isMoreLoading\"></div>\r\n      <div v-else>\r\n        <MoreSection :more_spot=\"moreSpot\">\r\n          <template v-slot:moretitle>\r\n            <h2>更多景點 :</h2>\r\n          </template>\r\n        </MoreSection>\r\n      </div>\r\n    </Transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport InfoSection from \"../components/InfoSection.vue\";\r\nimport MoreSection from \"./../components/MoreSection.vue\";\r\nimport spotAPI from \"./../apis/scenicSpot\";\r\nimport { ref, onBeforeMount } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nexport default {\r\n  components: {\r\n    InfoSection,\r\n    MoreSection,\r\n  },\r\n  setup() {\r\n    const top = ref(1);\r\n    const skip = ref(0);\r\n    const spot = ref({});\r\n    const moreSpot = ref([]);\r\n    const isLoading = ref(false);\r\n    const isMoreLoading = ref(false);\r\n    const route = useRoute();\r\n    const routeId = ref(route.params.id);\r\n    const fetchOneSpot = async () => {\r\n      isLoading.value = true;\r\n      const { data, statusText } = await spotAPI.getAllSpot({\r\n        filter: `${encodeURIComponent(\"$\")}filter=${encodeURIComponent(\r\n          `contains(ScenicSpotID, '${routeId.value}')`\r\n        )}&`,\r\n        top: `${encodeURIComponent(\"$\")}top=${top.value}&`,\r\n        skip: `${encodeURIComponent(\"$\")}skip=${skip.value}&`,\r\n      });\r\n      if (statusText === \"OK\") {\r\n        console.log(\"串接成功!!!\");\r\n      }\r\n      spot.value = {\r\n        id: data[0].ScenicSpotID,\r\n        address: data[0].Address ? data[0].Address : data[0].City,\r\n        class1: data[0].Class1 ? data[0].Class1 : \"\",\r\n        class2: data[0].Class2 ? data[0].Class2 : \"\",\r\n        class3: data[0].Class3 ? data[0].Class3 : \"\",\r\n        description: data[0].DescriptionDetail,\r\n        openTime: data[0].OpenTime,\r\n        phone: data[0].Phone,\r\n        picture: data[0].Picture ? data[0].Picture : {},\r\n        position: data[0].Position,\r\n        name: data[0].ScenicSpotName,\r\n      };\r\n      isLoading.value = false;\r\n    };\r\n    const fetchMoreSpot = async () => {\r\n      isMoreLoading.value = true;\r\n      const { data, statusText } = await spotAPI.getAllSpot({\r\n        filter: \"\",\r\n        top: `${encodeURIComponent(\"$\")}top=${10}&`,\r\n        skip: `${encodeURIComponent(\"$\")}skip=${skip.value}&`,\r\n      });\r\n      if (statusText === \"OK\") {\r\n        console.log(\"串接成功!!!\");\r\n      }\r\n      moreSpot.value = data.map((spot) => {\r\n        return {\r\n          id: spot.ScenicSpotID,\r\n          address: spot.Address ? spot.Address : spot.City,\r\n          class1: spot.Class1 ? spot.Class1 : \"\",\r\n          class2: spot.Class2 ? spot.Class2 : \"\",\r\n          class3: spot.Class3 ? spot.Class3 : \"\",\r\n          description: spot.DescriptionDetail,\r\n          openTime: spot.OpenTime,\r\n          phone: spot.Phone,\r\n          picture: spot.Picture ? spot.Picture : {},\r\n          position: spot.Position,\r\n          name: spot.ScenicSpotName,\r\n        };\r\n      });\r\n      moreSpot.value = moreSpot.value.filter(\r\n        (spot) => spot.id !== routeId.value\r\n      );\r\n      isMoreLoading.value = false;\r\n    };\r\n    onBeforeMount(fetchOneSpot);\r\n    onBeforeMount(fetchMoreSpot);\r\n\r\n    return {\r\n      top,\r\n      skip,\r\n      spot,\r\n      isLoading,\r\n      moreSpot,\r\n      isMoreLoading,\r\n    };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./IndividualSpot.vue?vue&type=template&id=c03dddea\"\nimport script from \"./IndividualSpot.vue?vue&type=script&lang=js\"\nexport * from \"./IndividualSpot.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\ac-project\\\\taiwan-tour\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_Transition","name","$setup","_hoisted_2","_createBlock","_component_InfoSection","initial_info","_hoisted_3","_hoisted_4","_component_MoreSection","more_spot","moretitle","_hoisted_5","components","InfoSection","MoreSection","setup","top","ref","skip","spot","moreSpot","isLoading","isMoreLoading","route","useRoute","routeId","params","id","fetchOneSpot","async","value","data","statusText","spotAPI","filter","encodeURIComponent","console","log","ScenicSpotID","address","Address","City","class1","Class1","class2","Class2","class3","Class3","description","DescriptionDetail","openTime","OpenTime","phone","Phone","picture","Picture","position","Position","ScenicSpotName","fetchMoreSpot","map","onBeforeMount","__exports__","render"],"sourceRoot":""}