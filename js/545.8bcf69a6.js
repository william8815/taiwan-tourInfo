"use strict";(self["webpackChunktaiwan_tour"]=self["webpackChunktaiwan_tour"]||[]).push([[545],{179:function(e,t,a){var i=a(6163);t["Z"]={getActivity({area:e,select:t,filter:a,orderby:n,top:o,skip:r}){return i.l.get(`/Activity/${e}?${t}${a}${n}${o}${r}%24format=JSON`)},getAllActivity({filter:e,top:t,skip:a}){return i.l.get(`/Activity?${e}${t}${a}%24format=JSON`)}}},5062:function(e,t,a){var i=a(6163);t["Z"]={getHotel({area:e,select:t,filter:a,top:n,skip:o}){return i.l.get(`/Hotel/${e}?${t}${a}${n}${o}%24format=JSON`)},getAllHotel({filter:e,top:t,skip:a}){return i.l.get(`/Hotel?${e}${t}${a}%24format=JSON`)}}},3414:function(e,t,a){var i=a(6163);t["Z"]={getRestaurant({area:e,select:t,filter:a,top:n,skip:o}){return i.l.get(`/Restaurant/${e}?${t}${a}${n}${o}%24format=JSON`)},getAllRestaurant({filter:e,top:t,skip:a}){return i.l.get(`/Restaurant?${e}${t}${a}%24format=JSON`)}}},8545:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var i=a(6252),n=a(3577);const o=e=>((0,i.dD)("data-v-1b8f1998"),e=e(),(0,i.Cn)(),e),r={class:"container"},l={class:"title"},s=o((()=>(0,i._)("span",null,"搜尋結果",-1))),c={key:0},u={key:1,class:"search-list mt-3"},d={class:"card-image"},p=["src","alt"],$={class:"spot-body card-body"},v={class:"card-title"},m={class:"card-text"},g={class:"btn-section"},f=["disabled"],y={key:0,class:"spinner-border spinner-border-sm text-light",role:"status"},k=o((()=>(0,i._)("span",{class:"visually-hidden"},"Loading...",-1))),h=[k],R={key:1};function w(e,t,a,o,k,w){const I=(0,i.up)("MainHeader"),b=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(I,{searchState:o.isSearchState},null,8,["searchState"]),(0,i._)("div",l,[(0,i._)("i",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"fa-solid fa-arrow-left px-3"}),s]),o.isLoading?((0,i.wg)(),(0,i.iD)("div",c,"...Loading")):((0,i.wg)(),(0,i.iD)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.searchResult,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"search-card card mb-2"},[(0,i._)("div",d,[(0,i.Wm)(b,{to:{name:`individual-${o.category.enTitle}`,params:{area:e.$route.params.area,id:t.id}}},{default:(0,i.w5)((()=>[(0,i._)("img",{src:o.filterImage(t.picture.PictureUrl1),class:"card-img-top",alt:t.name},null,8,p)])),_:2},1032,["to"])]),(0,i._)("div",$,[(0,i.Wm)(b,{to:{name:`individual-${o.category.enTitle}`,params:{area:e.$route.params.area,id:t.id}}},{default:(0,i.w5)((()=>[(0,i._)("h3",v,(0,n.zw)(t.name),1),(0,i._)("p",m,(0,n.zw)(t.city),1)])),_:2},1032,["to"])])])))),128))])),(0,i._)("div",g,[(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>o.showMore&&o.showMore(...e)),class:"moreBtn btn btn-primary",disabled:o.isLoading},[o.isProcessing?((0,i.wg)(),(0,i.iD)("div",y,h)):((0,i.wg)(),(0,i.iD)("span",R,"更多景點"))],8,f)])])}var I=a(9673),b=a(7206),A=a(3414),C=a(5062),H=a(179),S=a(3907),U=a(2262),_={components:{MainHeader:I.Z},setup(){const e=(0,U.iH)(12),t=(0,U.iH)(0),a=(0,U.iH)(""),n=(0,U.iH)([]),o=(0,U.iH)(null),r=(0,U.iH)(null),l=(0,U.iH)(!1),s=(0,U.iH)(!1),c=(0,U.iH)(!0),u=(0,S.oR)(),d=(0,i.Fl)((()=>u.state.currentArea)),p=(0,i.Fl)((()=>u.state.category)),$=(0,i.Fl)((()=>u.state.searchKeyWord));(0,i.wF)((()=>{a.value=$.value,y(a.value)}));const v=async a=>{try{l.value=!0;let i=[];const{data:o}=await b.Z.getAllSpot({filter:p.value?`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(ScenicSpotName, '${a}')`)}&`:"",top:`${encodeURIComponent("$")}top=${e.value}&`,skip:`${encodeURIComponent("$")}skip=${t.value}&`});i=o.map((e=>({id:e.ScenicSpotID,name:e.ScenicSpotName,city:e.Address,picture:e.Picture?e.Picture:{}}))),n.value.push(...i),l.value=!1}catch(i){l.value=!1,console.log(i)}},m=async a=>{try{l.value=!0;let i=[];const{data:o}=await A.Z.getAllRestaurant({filter:p.value?`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(RestaurantName, '${a}')`)}&`:"",top:`${encodeURIComponent("$")}top=${e.value}&`,skip:`${encodeURIComponent("$")}skip=${t.value}&`});i=o.map((e=>({id:e.RestaurantID,name:e.RestaurantName,city:e.Address,picture:e.Picture?e.Picture:{}}))),n.value.push(...i),l.value=!1}catch(i){l.value=!1,console.log(i)}},g=async a=>{try{l.value=!0;let i=[];const{data:o}=await C.Z.getAllHotel({filter:p.value?`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(HotelName, '${a}')`)}&`:"",top:`${encodeURIComponent("$")}top=${e.value}&`,skip:`${encodeURIComponent("$")}skip=${t.value}&`});i=o.map((e=>({id:e.HotelID,name:e.HotelName,city:e.Address,picture:e.Picture?e.Picture:{}}))),n.value.push(...i),l.value=!1}catch(i){l.value=!1,console.log(i)}},f=async a=>{try{l.value=!0;let i=[];const{data:o}=await H.Z.getAllActivity({filter:p.value?`${encodeURIComponent("$")}filter=${encodeURIComponent(`contains(ActivityName, '${a}')`)}&`:"",top:`${encodeURIComponent("$")}top=${e.value}&`,skip:`${encodeURIComponent("$")}skip=${t.value}&`});i=o.map((e=>({id:e.ActivityID,name:e.ActivityName,city:e.Address,picture:e.Picture?e.Picture:{}}))),n.value.push(...i),l.value=!1}catch(i){l.value=!1,console.log(i)}},y=async e=>{if(0!==e.trim().length)switch(p.value.enTitle){case"spot":v(e);break;case"food":m(e);break;case"hostel":g(e);break;case"activity":f(e);break;default:break}else n.value=[]},k=(0,i.Fl)((()=>function(e){return e||"https://i.postimg.cc/fyZnBVXy/pexels-tsang-chung-yee-669963.jpg"})),h=()=>{s.value=!0,t.value+=12,setTimeout((()=>{y(a.value),s.value=!1}),1e3)};return{keyword:a,searchResult:n,top:e,skip:t,isLoading:l,resultList:o,search:r,isProcessing:s,isSearchState:c,currentArea:d,category:p,searchKeyWord:$,filterImage:k,showMore:h}}},N=a(3744);const D=(0,N.Z)(_,[["render",w],["__scopeId","data-v-1b8f1998"]]);var P=D}}]);
//# sourceMappingURL=545.8bcf69a6.js.map